kind: ConfigMap
apiVersion: v1
metadata:
  name: conf-{{ template "sitermagent.truncname" . }}
  namespace: {{ .Values.namespace }}
data:
  sense-siterm-agent: |
    ---
{{- if .Values.gitrepo }}
    GIT_REPO: {{ .Values.gitrepo }}
{{- end }}
{{- if .Values.gitbranch }}
    GIT_BRANCH: {{ .Values.gitbranch }}
{{- end }}
{{- if .Values.giturl }}
    GIT_URL: {{ .Values.giturl }}
{{- end }}
    SITENAME: {{ .Values.sitename }}
{{- if .Values.md5 }}
{{- if or (eq .Values.deploymentType "StatefulSet") (eq .Values.deploymentType "Deployment") }}
    MD5: {{ .Values.md5 }}
{{- end }}
{{- end }}
